
{% extends 'master.html' %}

{% load static from staticfiles %}

{% block title %} Usuarios {% endblock title %}

{% block css %}

	<!-- SmartCFDI -->
	<link rel="stylesheet" href="{% static 'usuario/usuario_lista.css' %}" />

{% endblock css %}

{% block contenido %}

<ol class="breadcrumb">
	<li class="app-breadcrumb-inactive"><a href="{% url 'home.index' %}">Inicio</a></li>
	<li class="active app-breadcrumb-active">Usuarios</li>
</ol>

<div class="container-fluid">
	<div class="panel panel-default">

		<!-- Default panel contents -->
		<div class="panel-heading">

			<a class="btn btn-primary btn-sm" href="{% url 'seguridad.usuario_nuevo' %}">
				<span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
				Nuevo
			</a>
		</div>

	  	<!-- Registros -->
		{% if usuarios %}
		<div class="table-responsive">
			<table class="table table-striped table-bordered table-hover table-condensed">
				<tr>
					<th>Cuenta</th> 
					<th>Nombre</th> 
					<th>Apellidos</th> 
					<th>Email</th> 
					<th>Estado</th> 
					<th>Ultimo Login</th> 
					<th>Fecha Registro</th> 
					<td></td>
				</tr>
				{% for usuario in usuarios %}
				<tr>
					<td> {{ usuario.username }} </td> 
					<td> {{ usuario.first_name }} </td> 
					<td> {{ usuario.last_name }} </td> 
					<td> {{ usuario.email }} </td> 
					<td> 
						{% if usuario.is_active %} 
							<span class="label label-success">ACTIVO</span>
						{% else %} 
							<span class="label label-default">DESHABILITADO</span>
						{% endif %} 
					</td> 
					<td> {% if usuario.last_login %} {{ usuario.last_login }} {% else %} - {% endif %} </td>
					<td> {{ usuario.date_joined }} </td> 
					<td> 
	                    <a href="{% url 'seguridad.usuario_editar' usuario.pk %}" class="btn btn-warning btn-xs">
	                    	<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
	                    	Editar
	                    </a> 
	                </td> 
				</tr>
				{% endfor %}
			</table>		
		</div>

		<div class="row">
			<div class="col-md-12">
				<nav>
				    {% if is_paginated %}
				        <ul class="pagination">
				            {% if page_obj.has_previous %}
				                <li><a href="?page={{ page_obj.previous_page_number }}">&laquo;</a></li>
				            {% endif %}

				            {% for i in paginator.page_range %}
				                <li {% if page_obj.number == i %} class="active" {% endif %}>
				                    <a href="?page={{i}}">{{ i }}</a>
				                </li>
				            {% endfor %}

				            {% if page_obj.has_next %}
				                <li><a href="?page={{ page_obj.next_page_number }}">&raquo;</a></li>
				            {% endif %}
				        </ul>
				    {% endif %}
				</nav>
			</div>
		</div>

		{% else %}
		<h3 class="sin-resultados">No se encontraron usuarios</h3>
		{% endif %}
	</div>
</div>


{% endblock contenido %}